library(oce)
png("light_clock.png", width=700, height=700, pointsize=18)
d <- read.table("../skynet-01.dat", header=FALSE)
t <- strptime(paste(d$V1, d$V2), format='%Y-%m-%d %H:%M:%S', tz="America/Halifax")
time <- as.POSIXct(as.numeric(t), origin="1970-01-01", tz="UTC")
light <- (100*(1023-d$V3)/1023)
t <- as.POSIXlt(time)
par(mar=c(0,0,0,0))
hour <- t$hour + t$min / 60
light.scale <- 1 * max(light)
r <- 1 + light / light.scale
x <- r * sin(2*pi*hour/24)
y <- r * cos(2*pi*hour/24)
plot(x,y,asp=1,cex=1/3,axes=FALSE, xlab="", ylab="", col=hsv(rescale(as.numeric(time), c(0,2/3))))
xc <- sin(2*pi*seq(0,23,0.1)/24)
yc <- cos(2*pi*seq(0,23,0.1)/24)
lines(xc, yc)
xc <- sin(2*pi*seq(0,23,1)/24)
yc <- cos(2*pi*seq(0,23,1)/24)
xcc <- .9*sin(2*pi*seq(0,23,1)/24)
ycc <- .9*cos(2*pi*seq(0,23,1)/24)
segments(xc, yc, xcc, ycc)
xcc <- .8*sin(2*pi*seq(0,23,1)/24)
ycc <- .8*cos(2*pi*seq(0,23,1)/24)
text(xcc, ycc, 0:23)
text(0, 0, "site: skynet-01\ncolor: time in series\nhour: UTC")
